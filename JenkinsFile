pipeline{
    agent any
    tools{
        maven 'Maven'
    }
    stages{
    stage ('checkout')
    {
        steps{
            checkout scm
        }
    }
    stage ('Build')
    {
        steps{
            'mvn install'
        }
    }
    stage ('Unit Testing')
    
    {
        steps{
            'mvn test'
        }
    
    }
    
    stage ('Sonar Analaysis')
    { 
        steps{
            withSonarQubeEnv("Test_Sonar"){
                'mvn org.sonarsource.scanner.maven:sonar-maven-plugin:3.2:sonar'
            }
        }
    
    }
    
    
 }
 post{
   
    success{
        echo 'success'
    }
 
 }
}
